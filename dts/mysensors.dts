/* NOTE: iio-hwmon: https://www.kernel.org/doc/Documentation/devicetree/bindings/iio/iio-bindings.txt */

/dts-v1/;
/plugin/;

/ {
  compatible = "brcm,bcm2708";

  fragment@0 {
    target = <&i2c_arm>;
    __overlay__ {
      #address-cells = <1>;
      #size-cells = <0>;
      status = "okay";

      bmp180: bmp180@77 {
        /* i2c */
        compatible = "bosch,bmp180";
        reg = <0x77>;
        status = "okay";

        /* iio */
        #io-channel-cells = <1>; /* multiple channels */

        /* iio/pressure/bmp280 special config */
        temp-measurement-period = <100>;
        default-oversampling = <3>;
      };
    };
  };

  fragment@1 {
    target = <&i2c_arm>;
    __overlay__ {
      #address-cells = <1>;
      #size-cells = <0>;
      status = "okay";

      htu21: htu21@40 {
        /* i2c */
        compatible = "htu21"; /* NOTE: will become "meas,htu21" in newer kernels */
        reg = <0x40>;
        status = "okay";

        /* iio */
        #io-channel-cells = <1>; /* multiple channels */

        /* iio/humidity/htu21 special config */
        /* (NONE) */
      };
    };
  };

  fragment@2 {
    target = <&i2c_arm>;
    __overlay__ {
      #address-cells = <1>;
      #size-cells = <0>;
      status = "okay";

      /* Use HWMON driver instead of IIO, JEDEC JC-42 compatible, 0x18 - 0x1f */
      mcp9808: mcp9808@18 {
        /* i2c */
        compatible = "jedec,jc-42.4-temp";
        reg = <0x18>;
        status = "okay";

        /* hwmon */
        /* (NONE) */

        /* hwmon/jc42 special config */
        /* (NONE) */
      };
    };
  };


  fragment@3 {
    target = <&i2c_arm>;
    __overlay__ {
      #address-cells = <1>;
      #size-cells = <0>;
      status = "okay";

      hmc5883l: hmc5883l@3c {
        /* i2c */
        compatible = "honeywell,hmc5883l";
        reg = <0x3c>;
        status = "okay";

        /* iio */
        #io-channel-cells = <1>; /* multiple channels */

        /* iio/magnetometer/hmc5843 special config */
        /* (NONE) */
      };
    };
  };


  fragment@4 {
    target = <&i2c_arm>;
    __overlay__ {
      #address-cells = <1>;
      #size-cells = <0>;
      status = "okay";

      tmp007: tmp007@43 {
        /* i2c */
        compatible = "ti,tmp007"; /* NOTE: in backports */
        reg = <0x43>; /* NOTE: pull both AD0 and AD1 up, or there will be a conflict with HTU21D! */
        status = "okay";

        /* iio */
        #io-channel-cells = <1>; /* multiple channels */

        /* iio/magnetometer/tmp007 special config */
        /* (NONE) */
      };
    };
  };

  fragment@5 {
    target = <&i2c_arm>;
    __overlay__ {
      #address-cells = <1>;
      #size-cells = <0>;
      status = "okay";

      tsl2591: tsl2591@29 {
        /* i2c */
        compatible = "tsl2591"; /* NOTE: in backports */
        reg = <0x29>;
        status = "okay";

        /* iio */
        #io-channel-cells = <1>; /* multiple channels */

        /* iio/light/tsl2591 special config */
        /* (NONE) */
      };
    };
  };

  iio-hwmon {
    compatible = "iio-hwmon";
    status = "okay";

    io-channels =
      <&bmp180 0>, <&bmp180 1>,
      <&htu21 0>, <&htu21 1>,
      <&tmp007 0>, <&tmp007 1>,
      <&tsl2591 0>, <&tsl2591 1>,
      <&hmc5883l 0>, <&hmc5883l 1>, <&hmc5883l 2>;
    io-channel-names =
      "pressure", "temp",
      "temp", "humidity",
      "ambient", "object",
      "all", "ir",
      "x", "y", "z";
  };

};
